{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../base-field-edit/base.field.edit.component\";\n\nfunction BaseTableComponent_div_2_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 16);\n  }\n}\n\nfunction BaseTableComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵelementStart(2, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_div_2_Template_button_click_2_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n\n      const _r4 = i0.ɵɵreference(17);\n\n      return ctx_r9.onCreate($event, _r4);\n    });\n    i0.ɵɵtemplate(3, BaseTableComponent_div_2_span_3_Template, 1, 0, \"span\", 15);\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"create\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.addProcess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.addProcess);\n  }\n}\n\nfunction BaseTableComponent_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵelementStart(2, \"span\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const field_r11 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", field_r11.width + \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r11.title);\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const field_r20 = ctx.$implicit;\n    const entry_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", field_r20.width + \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r20.viewFn ? field_r20.viewFn(entry_r12[field_r20.name]) : entry_r12[field_r20.name]);\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_div_1_ng_container_7_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 24);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_container_13_div_1_ng_container_7_a_1_Template_a_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r25 = i0.ɵɵnextContext(3);\n      const entry_r12 = ctx_r25.$implicit;\n      const i_r13 = ctx_r25.index;\n      const ctx_r23 = i0.ɵɵnextContext();\n\n      const _r4 = i0.ɵɵreference(17);\n\n      return ctx_r23.onEdit($event, _r4, entry_r12, i_r13);\n    });\n    i0.ɵɵtext(1, \"edit\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_div_1_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BaseTableComponent_ng_container_13_div_1_ng_container_7_a_1_Template, 2, 0, \"a\", 23);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const entry_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !entry_r12.deletedAt);\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_div_1_ng_container_10_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 26);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_container_13_div_1_ng_container_10_a_1_Template_a_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext(3);\n      const entry_r12 = ctx_r29.$implicit;\n      const i_r13 = ctx_r29.index;\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.onRemove($event, entry_r12, i_r13);\n    });\n    i0.ɵɵtext(1, \"remove\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_div_1_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BaseTableComponent_ng_container_13_div_1_ng_container_10_a_1_Template, 2, 0, \"a\", 25);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const entry_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !entry_r12.deletedAt);\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_div_1_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 27);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_container_13_div_1_ng_container_13_Template_a_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r34 = i0.ɵɵnextContext(2);\n      const entry_r12 = ctx_r34.$implicit;\n      const i_r13 = ctx_r34.index;\n      const ctx_r32 = i0.ɵɵnextContext();\n\n      const _r6 = i0.ɵɵreference(19);\n\n      return ctx_r32.onDelete($event, _r6, entry_r12, i_r13);\n    });\n    i0.ɵɵtext(2, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, BaseTableComponent_ng_container_13_div_1_ng_container_1_Template, 4, 3, \"ng-container\", 4);\n    i0.ɵɵelementStart(2, \"div\", 17);\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 21);\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtemplate(7, BaseTableComponent_ng_container_13_div_1_ng_container_7_Template, 2, 1, \"ng-container\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 21);\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtemplate(10, BaseTableComponent_ng_container_13_div_1_ng_container_10_Template, 2, 1, \"ng-container\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 21);\n    i0.ɵɵelementStart(12, \"span\");\n    i0.ɵɵtemplate(13, BaseTableComponent_ng_container_13_div_1_ng_container_13_Template, 3, 0, \"ng-container\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const entry_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r14.fields);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", \"5%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(entry_r12.deletedAt ? \"Yes\" : \"No\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", \"5%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.isEdit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", \"8%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.isRemove);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", \"7%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.isDelete);\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"Loading...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BaseTableComponent_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BaseTableComponent_ng_container_13_div_1_Template, 14, 13, \"div\", 18);\n    i0.ɵɵtemplate(2, BaseTableComponent_ng_container_13_div_2_Template, 4, 0, \"div\", 19);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const entry_r12 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.inProcess.includes(entry_r12.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.inProcess.includes(entry_r12.id));\n  }\n}\n\nfunction BaseTableComponent_div_15_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 16);\n  }\n}\n\nfunction BaseTableComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelementStart(1, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_div_15_Template_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return ctx_r37.onMore($event);\n    });\n    i0.ɵɵtemplate(2, BaseTableComponent_div_15_span_2_Template, 1, 0, \"span\", 15);\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"more\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleMap(\"width:100%; display: block;\");\n    i0.ɵɵproperty(\"disabled\", ctx_r3.moreProcess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.moreProcess);\n  }\n}\n\nfunction BaseTableComponent_ng_template_16_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 39);\n    i0.ɵɵelementStart(2, \"span\", 40);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r40 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r40.addError);\n  }\n}\n\nfunction BaseTableComponent_ng_template_16_ng_container_10_ng_container_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵelementStart(2, \"span\", 45);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 17);\n    i0.ɵɵelement(5, \"base-field-edit\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const field_r44 = i0.ɵɵnextContext().$implicit;\n    const ctx_r46 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", \"30%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r44.editTitle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", \"70%\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"type\", field_r44.editType)(\"fn\", field_r44.editReceiveFn)(\"control\", ctx_r46.modalForm.get(field_r44.formControlName));\n  }\n}\n\nfunction BaseTableComponent_ng_template_16_ng_container_10_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BaseTableComponent_ng_template_16_ng_container_10_ng_container_3_div_1_Template, 6, 8, \"div\", 43);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const field_r44 = ctx.$implicit;\n    const ctx_r43 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r43.isEntryLong(field_r44));\n  }\n}\n\nfunction BaseTableComponent_ng_template_16_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"form\", 41);\n    i0.ɵɵelementStart(2, \"div\", 42);\n    i0.ɵɵtemplate(3, BaseTableComponent_ng_template_16_ng_container_10_ng_container_3_Template, 2, 1, \"ng-container\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r41 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r41.modalForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r41.fields);\n  }\n}\n\nfunction BaseTableComponent_ng_template_16_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 9);\n    i0.ɵɵelementStart(2, \"div\", 47);\n    i0.ɵɵelementStart(3, \"span\", 48);\n    i0.ɵɵtext(4, \"Loading...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction BaseTableComponent_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r49 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"h4\", 33);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵelementStart(5, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_template_16_Template_a_click_5_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r49);\n      const modal_r39 = restoredCtx.$implicit;\n      $event.preventDefault();\n      return modal_r39.dismiss(\"close\");\n    });\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 35);\n    i0.ɵɵtemplate(9, BaseTableComponent_ng_template_16_ng_container_9_Template, 4, 1, \"ng-container\", 22);\n    i0.ɵɵtemplate(10, BaseTableComponent_ng_template_16_ng_container_10_Template, 4, 2, \"ng-container\", 22);\n    i0.ɵɵtemplate(11, BaseTableComponent_ng_template_16_ng_container_11_Template, 5, 0, \"ng-container\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 36);\n    i0.ɵɵelementStart(13, \"div\", 17);\n    i0.ɵɵelementStart(14, \"a\", 37);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_template_16_Template_a_click_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r49);\n      const modal_r39 = restoredCtx.$implicit;\n      $event.preventDefault();\n      return modal_r39.dismiss(\"cancel\");\n    });\n    i0.ɵɵtext(15, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 17);\n    i0.ɵɵelementStart(17, \"a\", 38);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_template_16_Template_a_click_17_listener($event) {\n      i0.ɵɵrestoreView(_r49);\n      const ctx_r51 = i0.ɵɵnextContext();\n      return ctx_r51.onModalEdit($event);\n    });\n    i0.ɵɵtext(18, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r5.modalTitle);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.addError);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.addProcess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.addProcess);\n  }\n}\n\nfunction BaseTableComponent_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r54 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"h4\", 33);\n    i0.ɵɵtext(3, \"Confirm You action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵelementStart(5, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_template_18_Template_a_click_5_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r54);\n      const modal_r52 = restoredCtx.$implicit;\n      $event.preventDefault();\n      return modal_r52.dismiss(\"close\");\n    });\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 35);\n    i0.ɵɵelementStart(9, \"div\");\n    i0.ɵɵelementStart(10, \"span\", 49);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 36);\n    i0.ɵɵelementStart(13, \"div\", 17);\n    i0.ɵɵelementStart(14, \"a\", 37);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_template_18_Template_a_click_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r54);\n      const modal_r52 = restoredCtx.$implicit;\n      $event.preventDefault();\n      return modal_r52.dismiss(\"cancel\");\n    });\n    i0.ɵɵtext(15, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 17);\n    i0.ɵɵelementStart(17, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function BaseTableComponent_ng_template_18_Template_a_click_17_listener($event) {\n      i0.ɵɵrestoreView(_r54);\n      const ctx_r56 = i0.ɵɵnextContext();\n      return ctx_r56.onModalConfirm($event);\n    });\n    i0.ɵɵtext(18, \"DELETE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate1(\"Do you really want to delete (permanently) the current row with id \", ctx_r7.deletedId, \"?\");\n  }\n}\n\nexport let BaseTableComponent = /*#__PURE__*/(() => {\n  class BaseTableComponent {\n    constructor(modalService) {\n      this.modalService = modalService; // {name, title, width}\n      // {titleEdit, typeEdit(Input, textArea, Select, mSelect), requireEdit, cbEdit}\n\n      this.fields = [];\n      this.isMore = false;\n      this.isCreate = false;\n      this.isEdit = false;\n      this.isRemove = true;\n      this.isDelete = true;\n      this.querys = [];\n      this.service = null;\n      this.isFormData = false;\n      this.data = [];\n      this.inProcess = [];\n      this.moreProcess = false;\n      this.addProcess = false;\n      this.addError = ''; // modal form data\n\n      this.modalForm = new FormGroup({});\n      this.modalTitle = '...';\n      this.deletedId = 0;\n      this.obss = {};\n      this.obsErrors = {};\n      this.currentPage = 1;\n    }\n\n    isEntryLong(entry) {\n      return entry.editType !== undefined;\n    }\n\n    refreshSettings() {\n      let o = {};\n      this.fields.map(field => {\n        if (this.isEntryLong(field)) {\n          let opts = [];\n          if (field.editRequire) opts.push(Validators.required);\n\n          if (field.editType === 'multi-select' || field.editType === 'file-upload') {\n            o[field.formControlName] = new FormControl([], opts);\n          } else if (field.editType === 'checkbox') {\n            o[field.formControlName] = new FormControl(false, opts);\n          } else {\n            o[field.formControlName] = new FormControl('', opts);\n          }\n        }\n      });\n      this.modalForm = new FormGroup(o);\n    }\n\n    editFnData(o) {\n      let newO = {};\n      this.fields.map(field => {\n        if (this.isEntryLong(field)) {\n          newO[field.formControlName] = field.editFn ? field.editFn(o[field.name]) : o[field.name];\n        }\n      });\n      return newO;\n    }\n\n    setFormValue(o) {\n      let fields = this.modalForm.controls;\n      Object.keys(o).map(key => {\n        if (fields[key]) fields[key].setValue(o[key]);\n      });\n    }\n\n    getFormValue(input = {}) {\n      let o = {};\n      Object.keys(input).map(key => {\n        o[key] = input[key];\n      });\n      Object.keys(this.modalForm.controls).map(key => {\n        o[key] = this.modalForm.controls[key].value;\n      });\n      return o;\n    }\n\n    getFormData() {\n      const formData = new FormData();\n      Object.keys(this.modalForm.controls).map(key => {\n        let data = this.modalForm.controls[key].value;\n\n        if (Array.isArray(data)) {\n          for (let item of data) {\n            formData.append(key + '[]', item);\n          }\n        } else {\n          formData.append(key, data);\n        }\n      });\n      return formData;\n    }\n\n    emptyObject(o) {\n      Object.keys(o).map(key => {\n        o[key] = '';\n      });\n      return o;\n    }\n\n    ngOnInit() {\n      this.querys.map(entry => {\n        this.obss[entry.namespace + entry.method] = this.service.source(entry.namespace, entry.method).subscribe(data => {\n          entry.success.call(entry.ctxSuccess || this, data);\n        });\n\n        if (entry.error) {\n          this.obsErrors[entry.namespace + entry.method] = this.service.error(entry.namespace, entry.method).subscribe(e => {\n            entry.error.call(entry.ctxError || this, e);\n          });\n        }\n      });\n      this.onMore(new Event('click'));\n    }\n\n    ngOnDestroy() {\n      Object.keys(this.obss).map(key => {\n        this.obss[key].unsubscribe();\n        if (this.obsErrors[key]) this.obsErrors[key].unsubscribe();\n      });\n    }\n\n    onEdit(e, modalContent, entry, index) {\n      e.preventDefault();\n      const modalRef = this.modalService.open(modalContent, {\n        size: 'lg'\n      });\n      modalRef.result.then(result => {}, reason => {});\n      this.modalTitle = 'Edit';\n      this.setFormValue(this.editFnData(entry));\n\n      this.onModalEdit = e => {\n        e.preventDefault();\n\n        if (this.modalForm.valid) {\n          modalRef.close();\n          this.service.post('edit', this.isFormData ? this.getFormData() : this.getFormValue(entry));\n          this.inProcess = [...this.inProcess, entry.id];\n        }\n      };\n    }\n\n    onRemove(e, entry, index) {\n      e.preventDefault();\n      this.service.post('remove', {\n        id: entry.id\n      });\n      this.inProcess = [...this.inProcess, entry.id];\n    }\n\n    onDelete(e, modalContent, entry, index) {\n      e.preventDefault();\n      const modalRef = this.modalService.open(modalContent, {\n        size: 'sm'\n      });\n      modalRef.result.then(result => {}, reason => {});\n      this.deletedId = entry.id;\n\n      this.onModalConfirm = e => {\n        e.preventDefault();\n        this.service.post('delete', {\n          id: entry.id\n        });\n        this.inProcess = [...this.inProcess, entry.id];\n        modalRef.close();\n      };\n    }\n\n    onCreate(e, modalContent) {\n      e.preventDefault();\n      const modalRef = this.modalService.open(modalContent, {\n        size: 'lg'\n      });\n      modalRef.result.then(result => {}, reason => {\n        this.addError = '';\n      });\n      this.addModalRef = modalRef;\n      this.modalTitle = 'Create';\n      this.setFormValue(this.emptyObject(this.getFormValue()));\n\n      this.onModalEdit = e => {\n        e.preventDefault();\n\n        if (this.modalForm.valid) {\n          this.service.post('add', this.isFormData ? this.getFormData() : this.getFormValue());\n          this.addProcess = true;\n          this.addError = '';\n        }\n      };\n    }\n\n    onMore(e) {\n      e.preventDefault();\n      if (this.currentPage < 1) this.currentPage = 1;\n      this.service.get('gets', {\n        params: {\n          page: this.currentPage\n        }\n      });\n      this.currentPage++;\n      this.moreProcess = true;\n    }\n\n    patchData(data) {\n      this.data = this.data.map(item => {\n        if (item.id === data.id) {\n          let keys = Object.keys(data);\n          keys.map(key => {\n            item[key] = data[key];\n          });\n        }\n\n        return item;\n      });\n      this.inProcess = this.inProcess.filter(item => item !== data.id);\n    }\n\n    filterData(data) {\n      this.data = this.data.filter(item => {\n        return item.id !== data.id;\n      });\n      this.inProcess = this.inProcess.filter(item => item !== data.id);\n    }\n\n    filterError(e) {\n      let id = e.error.id;\n      this.inProcess = this.inProcess.filter(item => item !== id);\n    }\n\n    injectErrorAdd(e) {\n      this.addError = e.error.reason;\n      this.addProcess = false;\n    }\n\n    injectData(data) {\n      if (data.length === 0) this.currentPage--;\n      this.data = [...this.data, ...data];\n      this.moreProcess = false;\n    }\n\n    injectOneData(data) {\n      this.data = [data, ...this.data];\n      this.addProcess = false;\n\n      try {\n        this.addModalRef.close();\n      } catch (e) {}\n    }\n\n    injectAddData(data) {\n      this.data = [...data, ...this.data];\n      this.addProcess = false;\n\n      try {\n        this.addModalRef.close();\n      } catch (e) {}\n    }\n\n  }\n\n  BaseTableComponent.ɵfac = function BaseTableComponent_Factory(t) {\n    return new (t || BaseTableComponent)(i0.ɵɵdirectiveInject(i1.NgbModal));\n  };\n\n  BaseTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BaseTableComponent,\n    selectors: [[\"base-table\"]],\n    inputs: {\n      fields: \"fields\",\n      isMore: \"isMore\",\n      isCreate: \"isCreate\",\n      isEdit: \"isEdit\",\n      isRemove: \"isRemove\",\n      isDelete: \"isDelete\",\n      querys: \"querys\",\n      service: \"service\",\n      isFormData: \"isFormData\"\n    },\n    decls: 20,\n    vars: 8,\n    consts: [[1, \"container-md\"], [1, \"row\", \"align-items-center\", \"justify-content-end\"], [\"class\", \"col-auto align-self-end\", 4, \"ngIf\"], [1, \"row\", \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [1, \"cell-removed\", \"col-auto\"], [1, \"h5\"], [1, \"cell-actions\", \"col-auto\"], [1, \"\"], [1, \"row\", \"justify-content-center\"], [\"class\", \"col-6\", 4, \"ngIf\"], [\"modal_edit\", \"\"], [\"modal_confirm\", \"\"], [1, \"col-auto\", \"align-self-end\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [\"class\", \"spinner-border spinner-border-sm\", \"role\", \"status\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"role\", \"status\", \"aria-hidden\", \"true\", 1, \"spinner-border\", \"spinner-border-sm\"], [1, \"col-auto\"], [\"class\", \"row mt-1 mb-1\", 4, \"ngIf\"], [\"class\", \"d-flex align-items-center\", 4, \"ngIf\"], [1, \"row\", \"mt-1\", \"mb-1\"], [1, \"col-auto\", \"text-center\"], [4, \"ngIf\"], [\"href\", \"#\", \"class\", \"btn-sm text-decoration-none btn-primary\", 3, \"click\", 4, \"ngIf\"], [\"href\", \"#\", 1, \"btn-sm\", \"text-decoration-none\", \"btn-primary\", 3, \"click\"], [\"href\", \"#\", \"class\", \"btn-sm text-decoration-none btn-secondary\", 3, \"click\", 4, \"ngIf\"], [\"href\", \"#\", 1, \"btn-sm\", \"text-decoration-none\", \"btn-secondary\", 3, \"click\"], [\"href\", \"#\", 1, \"btn-sm\", \"text-decoration-none\", \"btn-danger\", 3, \"click\"], [1, \"d-flex\", \"align-items-center\"], [\"role\", \"status\", \"aria-hidden\", \"true\", 1, \"spinner-border\", \"ml-auto\"], [1, \"col-6\"], [\"type\", \"button\", 1, \"btn\", \"btn-info\", 3, \"disabled\", \"click\"], [1, \"modal-header\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\"], [\"href\", \"#\", 1, \"btn\", \"btn-danger\", \"text-decoration-none\", 3, \"click\"], [1, \"modal-body\"], [1, \"modal-footer\", \"justify-content-center\"], [\"href\", \"#\", 1, \"btn\", \"btn-secondary\", \"text-decoration-none\", 3, \"click\"], [\"href\", \"#\", 1, \"btn\", \"btn-success\", \"text-decoration-none\", 3, \"click\"], [1, \"alert\", \"alert-danger\"], [1, \"h3\"], [1, \"container-fluid\", 3, \"formGroup\"], [1, \"row\", \"row-cols-1\"], [\"class\", \"col row mt-1 mb-1 align-items-center\", 4, \"ngIf\"], [1, \"col\", \"row\", \"mt-1\", \"mb-1\", \"align-items-center\"], [1, \"h6\"], [3, \"type\", \"fn\", \"control\"], [\"role\", \"status\", 1, \"col-auto\", \"spinner-border\", 2, \"width\", \"5rem\", \"height\", \"5rem\"], [1, \"sr-only\"], [1, \"h2\"]],\n    template: function BaseTableComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, BaseTableComponent_div_2_Template, 6, 2, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\");\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtemplate(5, BaseTableComponent_ng_container_5_Template, 4, 3, \"ng-container\", 4);\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵelementStart(7, \"span\", 6);\n        i0.ɵɵtext(8, \"[x]\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 7);\n        i0.ɵɵelementStart(10, \"span\", 6);\n        i0.ɵɵtext(11, \"actions\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 8);\n        i0.ɵɵtemplate(13, BaseTableComponent_ng_container_13_Template, 3, 2, \"ng-container\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 9);\n        i0.ɵɵtemplate(15, BaseTableComponent_div_15_Template, 5, 4, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, BaseTableComponent_ng_template_16_Template, 19, 4, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(18, BaseTableComponent_ng_template_18_Template, 19, 1, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isCreate);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.fields);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"width\", \"5%\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵstyleProp(\"width\", \"20%\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.data);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isMore);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i4.BaseFieldEditComponent],\n    encapsulation: 2\n  });\n  return BaseTableComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}